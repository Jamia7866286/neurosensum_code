<?php 
   /*==============================================================
   
   	Template Name: Through Leadership Content Management
   
   ==============================================================*/
   
   get_header();?>


<div class="container editWebinarButton">
   <div class="row">
      <div class="col-12 col-md-12">
         <div class="catagory-content shadow-main">
             <a id="create_webinar_session" class="btn btn-outline-primary lg newWebinar">Create New Webinar (Session)</a>
         </div>
      </div>
   </div>
</div>

<div class="container">
   <div class="row">
      <div class="col-12 col-md-12">
         <div class="catagory-content shadow-main demand-upcoming-content ltd-deal-count">
            <div class="purchased-count">
               <div class="deal-purchased">

                  <div class="common-text">Life Time Deal Purchased:</div>

                  <div class="purchased-inner">

                     <div class="purchased">
                        <input type="number" min="0" placeholder="Enter Number of Purchased">
                        <button class="btn btn-primary lg">
                           Submit Data  
                           &nbsp;<i class="fa fa-spinner fa-spin" style="display:none"></i>
                        </button>
                     </div>

                     <div class="edit-count">
                        <button class="btn btn-success lg">
                           Total Purchased: &nbsp; 698
                           <!-- &nbsp;<i class="fa fa-pencil" style=""></i> -->
                        </button>
                     </div>

                  </div>
                  
               </div>
            </div>
         </div>
      </div>
   </div>
</div>




<div class="container cardListEdit" id="cardListEdit">
   <div class="row">
      
   </div>
</div>

<div class="cards-main container cardListEdit shimmer-cards" id="image-processor">
   <div class="row">
      <div class="col-12 col-md-3">
         <div class="card">
            <div class="card-body mb-md-3 mb-lg-5 mb-3">
               <div class="card-icon-feature shimmer" style="height:140px;margin-bottom:14px;"></div>
               <div class="card-content">
                  <div class="shimmer" style="height:20px;width:100%;margin-bottom:20px;"></div>
                  <div class="shimmer" style="height:14px;width:80%;"></div>
               </div>
            </div>
         </div>
      </div>
      <div class="col-12 col-md-3">
         <div class="card">
            <div class="card-body mb-md-3 mb-lg-5 mb-3">
               <div class="card-icon-feature shimmer" style="height:140px;margin-bottom:14px;"></div>
               <div class="card-content">
                  <div class="shimmer" style="height:20px;width:100%;margin-bottom:20px;"></div>
                  <div class="shimmer" style="height:14px;width:80%;"></div>
               </div>
            </div>
         </div>
      </div><div class="col-12 col-md-3">
         <div class="card">
            <div class="card-body mb-md-3 mb-lg-5 mb-3">
               <div class="card-icon-feature shimmer" style="height:140px;margin-bottom:14px;"></div>
               <div class="card-content">
                  <div class="shimmer" style="height:20px;width:100%;margin-bottom:20px;"></div>
                  <div class="shimmer" style="height:14px;width:80%;"></div>
               </div>
            </div>
         </div>
      </div><div class="col-12 col-md-3">
         <div class="card">
            <div class="card-body mb-md-3 mb-lg-5 mb-3">
               <div class="card-icon-feature shimmer" style="height:140px;margin-bottom:14px;"></div>
               <div class="card-content">
                  <div class="shimmer" style="height:20px;width:100%;margin-bottom:20px;"></div>
                  <div class="shimmer" style="height:14px;width:80%;"></div>
               </div>
            </div>
         </div>
      </div><div class="col-12 col-md-3">
         <div class="card">
            <div class="card-body mb-md-3 mb-lg-5 mb-3">
               <div class="card-icon-feature shimmer" style="height:140px;margin-bottom:14px;"></div>
               <div class="card-content">
                  <div class="shimmer" style="height:20px;width:100%;margin-bottom:20px;"></div>
                  <div class="shimmer" style="height:14px;width:80%;"></div>
               </div>
            </div>
         </div>
      </div><div class="col-12 col-md-3">
         <div class="card">
            <div class="card-body mb-md-3 mb-lg-5 mb-3">
               <div class="card-icon-feature shimmer" style="height:140px;margin-bottom:14px;"></div>
               <div class="card-content">
                  <div class="shimmer" style="height:20px;width:100%;margin-bottom:20px;"></div>
                  <div class="shimmer" style="height:14px;width:80%;"></div>
               </div>
            </div>
         </div>
      </div><div class="col-12 col-md-3">
         <div class="card">
            <div class="card-body mb-md-3 mb-lg-5 mb-3">
               <div class="card-icon-feature shimmer" style="height:140px;margin-bottom:14px;"></div>
               <div class="card-content">
                  <div class="shimmer" style="height:20px;width:100%;margin-bottom:20px;"></div>
                  <div class="shimmer" style="height:14px;width:80%;"></div>
               </div>
            </div>
         </div>
      </div><div class="col-12 col-md-3">
         <div class="card">
            <div class="card-body mb-md-3 mb-lg-5 mb-3">
               <div class="card-icon-feature shimmer" style="height:140px;margin-bottom:14px;"></div>
               <div class="card-content">
                  <div class="shimmer" style="height:20px;width:100%;margin-bottom:20px;"></div>
                  <div class="shimmer" style="height:14px;width:80%;"></div>
               </div>
            </div>
         </div>
      </div><div class="col-12 col-md-3">
         <div class="card">
            <div class="card-body mb-md-3 mb-lg-5 mb-3">
               <div class="card-icon-feature shimmer" style="height:140px;margin-bottom:14px;"></div>
               <div class="card-content">
                  <div class="shimmer" style="height:20px;width:100%;margin-bottom:20px;"></div>
                  <div class="shimmer" style="height:14px;width:80%;"></div>
               </div>
            </div>
         </div>
      </div><div class="col-12 col-md-3">
         <div class="card">
            <div class="card-body mb-md-3 mb-lg-5 mb-3">
               <div class="card-icon-feature shimmer" style="height:140px;margin-bottom:14px;"></div>
               <div class="card-content">
                  <div class="shimmer" style="height:20px;width:100%;margin-bottom:20px;"></div>
                  <div class="shimmer" style="height:14px;width:80%;"></div>
               </div>
            </div>
         </div>
      </div><div class="col-12 col-md-3">
         <div class="card">
            <div class="card-body mb-md-3 mb-lg-5 mb-3">
               <div class="card-icon-feature shimmer" style="height:140px;margin-bottom:14px;"></div>
               <div class="card-content">
                  <div class="shimmer" style="height:20px;width:100%;margin-bottom:20px;"></div>
                  <div class="shimmer" style="height:14px;width:80%;"></div>
               </div>
            </div>
         </div>
      </div><div class="col-12 col-md-3">
         <div class="card">
            <div class="card-body mb-md-3 mb-lg-5 mb-3">
               <div class="card-icon-feature shimmer" style="height:140px;margin-bottom:14px;"></div>
               <div class="card-content">
                  <div class="shimmer" style="height:20px;width:100%;margin-bottom:20px;"></div>
                  <div class="shimmer" style="height:14px;width:80%;"></div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>

<!-- <div class="no-data-found">
   <div class="no-data-text">Looks like there are no matching sessions. Try another search term or view our <a href="">featured sessions</a>.</div>
</div> -->

<div class="container">
   <div class="row">
      <div class="col-12 col-md-12">
         <div class="see-more-sessions cms">
            <span class="see-sessions-list" id="see_more_session">See more sessions</span>
         </div>
      </div>
   </div>
</div>
         

<!-- Create New Webinar Modal -->
<div class="modal fade show" id="newWebinar" tabindex="-1" role="dialog" aria-modal="true">
   <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-body">

               <div class="cms-loader" id="spinner-div">
                  <div class="cms-loader-inner"></div>
                  <!-- Please wait while data loading <i class="fa fa-spinner fa-spin edit-spinner"></i> -->
               </div>
               <section class="demand-upcoming-content">

                  <div class="container">
                     <div class="row">
                        <div class="col-12 col-md-12">
                           <div class="doc-link">
                           Need help with using this page? Refer to this <a href="https://docs.google.com/document/d/1ZHH232XZQSbeyWa9PqwuY8kwSVhN9MrXQnvxsm-TYTQ/edit?usp=sharing" target="_blank">How-to Guide</a>
                           </div>
                        </div>
                     </div>
                  </div>

                  <div class="container">
                     <div class="row">
                        <div class="col-12 col-md-12">
                           <div class="catagory-content shadow-main">
                              <div class="catagory-inner">
                                 <div class="catagory-name">Event Category</div>
                                 <div class="catagory-select">
                                    <select name="category_name" class="multiselectFilter" id="category_name" multiple>
                                       <option value="Featured">Featured</option>
                                       <option value="Best Practices">Best Practices</option>
                                       <option value="COVID-19 Impact">COVID-19 Impact</option>
                                       <option value="Customer Support">Customer Support</option>
                                       <option value="CX Stories">CX Stories</option>
                                       <option value="CX Strategy">CX Strategy</option>
                                       <option value="VOC">VOC</option>
                                    </select>
                                 </div>
                                 <div class="image-upload-size">Note: Use Control+Click for selecting multiple categories.</div>
                              </div>
                              <div class="catagory-inner">
                                 <div class="catagory-name">Event Type</div>
                                 <div class="catagory-select">
                                    <select name="" id="category_content">
                                       <option value="upcoming event">Up Coming</option>
                                       <option value="on demand event">On Demand</option>
                                       <option value="disable">Disable</option>
                                       <option value="live">Live</option>
                                    </select>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>

                  <div class="container" id="upComingCard">

                     <div class="row">
                        <div class="col-12">
                           <div class="cards-details shadow-main">
                              <div class="upcoming-card-text common-text">Event details</div>
                              <div class="card-details-inner">
                                 <div class="upload-file-inner imageUpload webinar-banner-img">
                                    <label class="upload-file-img" for="webinar_img">
                                       Upload card image
                                    </label>
                                    <input type="file" class="upload-file-input" accept="image/*" id="webinar_img">
                                    <!-- <i class="fa fa-file-image-o" aria-hidden="true"></i> -->
                                    <img class="fa fa-file-image-o" src="" style="width:30px;" id="webinar_img_tag" />
                                    <div class="image-upload-size">Note: For best results, use image size 594x330 & less than 1MB</div>
                                 </div>
                                 <div class="upload-file-inner">
                                    <div class="catagory-name">Title of the event<sup>*</sup></div>
                                    <!-- <input type="text" placeholder="Enter Title" id="webinar_title"> -->
                                    <textarea rows="3" cols="50" placeholder="Enter Title*" id="webinar_title"></textarea>
                                    <!-- <p class="error">This Field is required.</p> -->
                                 </div>
                                 <div class="upload-file-inner">
                                    <div class="catagory-name">Date</div>
                                    <input type="date" placeholder="yyyy-mm-dd" min="1997-01-01" max="2030-12-31" id="webinar_date">
                                 </div>
                                 <div class="upload-file-inner">
                                    <div class="catagory-name">Start time</div>
                                    <input type="time" min="09:00" max="18:00" placeholder="hh:mm" id="webinar_time">
                                 </div>
                                 <div class="upload-file-inner">
                                    <div class="catagory-name">End time</div>
                                    <input type="time" placeholder="Enter Ending Time" id="timeDuration">
                                    <div class="image-upload-size">Note: This field is only for On-Demand pages.</div>
                                 </div>
                                 <div class="upload-file-inner">
                                    <div class="catagory-name">Time zone/Country</div>
                                    <input type="text" placeholder="Enter Time Zone" id="webinar_country">
                                 </div>
                                 <div class="upload-file-inner">
                                    <input type="number" placeholder="Enter No. Of people registered/viewed" id="no_of_people_view">
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>

                     <div class="row">
                        <div class="col-md-6">
                           <div class="hero-video-url shadow-main">
                              <div class="upcoming-card-text common-text">Zoom Webinar ID<sup>*</sup></div>
                              <input type="text" placeholder="Enter Webinar id" id="webinar-id" required>
                              <!-- <p class="error">This Field is required.</p> -->
                              <div class="image-upload-size">Note: This field is required for Upcoming pages.</div>
                           </div>
                        </div>

                        <div class="col-md-6">
                           <div class="hero-video-url shadow-main">
                              <div class="upcoming-card-text common-text">Registration Form ID<sup>*</sup></div>
                              <input type="text" placeholder="Enter Form ID" id="registration-id" required>
                              <div class="image-upload-size">Note: This field is required for Upcoming pages.</div>
                           </div>
                        </div>

                     </div>
                     

                     <div class="row">
                        <div class="col-md-12">
                           <div class="single-page-content common-text">Main event page content</div>
                        </div>
                     </div>

                     
                     <div class="row">
                        <div class="col-md-12">
                           <div class="hero-video-url shadow-main">
                              <div class="upcoming-card-text common-text">Banner Video URL (Youtube link for Promotional video)</div>
                              <input type="text" placeholder="Enter Banner Video URL (Youtube link for Promotional video)" id="hero_video_url">
                              <div class="image-upload-size">Note: If this field is empty, image shown on banner will be same as card image.</div>
                           </div>
                        </div>
                     </div>

                     <div class="row">
                        <div class="col-md-12">
                           <div class="hero-video-url shadow-main">
                              <div class="upcoming-card-text common-text">Check in your local time URL</div>
                              <input type="text" placeholder="Enter URL to link to ‘Check in your local time’" id="check-locat-time">
                           </div>
                        </div>
                     </div>

                     <div class="row">
                        <div class="col-12">
                           <div class="go-live-main shadow-main">
                              <div class="go-live-text common-text">Attender Hero</div>
                              <div class="attender-content">
                                 <div class="attender-inner attender_div">
                                 </div>
                                 
                              </div>
                           </div>
                        </div>
                     </div>

                     <div class="row">
                        <div class="col-12">
                           <div class="who-should-attend shadow-main">
                              <div class="common-text">Who Should Attend</div>
                              <div class="who-should-content">
                                 <div class="checkbox-main">
                                    <input type="checkbox" name="who_should_attend[]" value="Customer Experience Manager">
                                    <div class="checkbox-label">Customer Experience Manager</div>
                                 </div>
                                 <div class="checkbox-main">
                                    <input type="checkbox" name="who_should_attend[]" value="Customer Support Professional">
                                    <div class="checkbox-label">Customer Support Professional</div>
                                 </div>
                                 <div class="checkbox-main">
                                    <input type="checkbox" name="who_should_attend[]" value="Customer Success Manager">
                                    <div class="checkbox-label">Customer Success Manager</div>
                                 </div>
                                 <div class="checkbox-main">
                                    <input type="checkbox" name="who_should_attend[]" value="Marketing Manager">
                                    <div class="checkbox-label">Marketing Manager</div>
                                 </div>
                                 <div class="checkbox-main">
                                    <input type="checkbox" name="who_should_attend[]" value="Product Manager">
                                    <div class="checkbox-label">Product Manager</div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>

                     <div class="row">
                        <div class="col-12">
                           <div class="about-webinar shadow-main">
                              <div class="go-live-text common-text">About The Webinar</div>

                              <div class="attender-content">
                                 <div class="no-of-episode">
                                    <!-- <input type="text" placeholder="Enter Webinar Description" id="webinar_description"> -->
                                    <textarea rows="3" cols="50" placeholder="Enter Webinar Description" id="webinar_description"></textarea>
                                 </div>
                              </div>
                              <div class="attender-content">
                                 <div class="attender-inner webinar_div">

                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>

                     <div class="row">
                        <div class="col-12">
                           <div class="about-speaker shadow-main">
                              <div class="go-live-text common-text">About The Speakers</div>
                              <div class="attender-content">
                                 <div class="attender-inner speakers_div"></div>
                              </div>
                           </div>
                        </div>
                     </div>

                     <div class="row">
                        <div class="col-12">
                           <div class="go-live-main shadow-main">
                              <div class="go-live-text common-text">Frequently Asked Question & Answer</div>
                              <div class="attender-content">
                                 <div class="attender-inner frequently-asked-question">
                                    
                                 </div> 
                              </div>
                           </div>
                        </div>
                     </div>

                     <div class="row">
                        <div class="col-md-12">
                           <div class="hero-video-url shadow-main"> 
                              <div class="go-live-text common-text">On-Demand Video URL (Youtube link for Full Video)<sup>*</sup></div>
                              <input type="text" placeholder="Enter On-Demand Video URL (Youtube link for Full Video)" id="demanded_video_url" required>
                              <!-- <p class="error">This Field is required.</p> -->
                              <div class="image-upload-size">Note: This field is required for On-Demand pages.</div>
                           </div>
                        </div>
                     </div>

                     <script>
                        // frequently asked question variables
                        var no_asked_question = 0;
                        function add_question_element(htmlElement){
                           return '<div class="no-episode-main question_container_'+no_asked_question+'">'+
                                       '<div class="live-image-main">'+
                                          // '<input type="text" id="question_'+no_asked_question+'" placeholder="Enter Question" class="question">'+
                                          '<textarea rows="4" cols="50" id="question_'+no_asked_question+'" placeholder="Enter Question" class="question"></textarea>'+
                                       '</div>'+
                                       '<div class="no-of-episode">'+
                                          // '<input type="text" id="answer_'+no_asked_question+'" placeholder="Enter Answer" class="answer">'+
                                          '<textarea rows="4" cols="50" id="answer_'+no_asked_question+'" placeholder="Enter Answer" class="answer"></textarea>'+
                                       '</div>'+
                                       htmlElement+
                                    '</div>';
                        }
                        // speakers variable
                        var no_of_speakers = 0;
                        var speaker_images = {};
                        function add_speakers(htmlElement){
                           return   '<div class="no-episode-main speakers_container_'+no_of_speakers+'">'+
                                       '<div class="live-image-main imageUpload">'+
                                          '<label class="upload-file-img" for="speaker_image_'+no_of_speakers+'">'+
                                             'Upload Speaker Image.'+
                                          '</label>'+
                                          '<input type="file" accept="image/*" id="speaker_image_'+no_of_speakers+'" class="upload-file-input speaker_image" >'+
                                          // '<i class="fa fa-file-image-o" aria-hidden="true"></i>'+
                                          '<img class="fa fa-file-image-o" src="" style="width:30px;" id="speaker_img_tag_'+no_of_speakers+'" />'+
                                          '<div class="image-upload-size">Please keep image size less than 1MB</div>'+
                                       '</div>'+
                                       '<div class="no-of-episode">'+
                                          '<input type="text" id="speaker_name_'+no_of_speakers+'" placeholder="Enter Speaker Name" class="speaker_name">'+
                                       '</div>'+
                                       '<div class="no-of-episode">'+
                                          '<input type="text" id="speaker_ownership_'+no_of_speakers+'" placeholder="Enter Speaker Designation" class="speaker_ownership">'+
                                       '</div>'+
                                       '<div class="no-of-episode">'+
                                          // '<input type="text" id="speaker_desc_'+no_of_speakers+'" placeholder="Description" class="speaker_desc">'+
                                          '<textarea rows="4" cols="50" id="speaker_desc_'+no_of_speakers+'" placeholder="Description" class="speaker_desc"></textarea>'+
                                       '</div>'+
                                       htmlElement+
                                    '</div>';
                        }
                        // webinar points variable
                        var no_of_webinar_points = 0;
                        function add_webinar_points(htmlElement){
                           return   '<div class="no-episode-main webinar_point_container_'+no_of_webinar_points+'">'+
                                       '<div class="no-of-episode webinar_point_div">'+
                                          // '<input type="text" id="webinar_point_'+no_of_webinar_points+'" placeholder="Enter Webinar Point" class="webinar_point">'+
                                          '<textarea rows="4" cols="50" placeholder="Enter Webinar Points..." id="webinar_point_'+no_of_webinar_points+'"></textarea>'+
                                       '</div>'+
                                       htmlElement+
                                    '</div>';
                        }
                        // attender variable
                        var attender_array = 0;
                        var attender_images = {};
                        function add_attender(htmlElement){
                           return   '<div class="no-episode-main attender_hero_container_'+no_of_attender+'">'+
                                       '<div class="live-image-main imageUpload">'+
                                          '<label class="upload-file-img" for="attender_image_'+no_of_attender+'">'+
                                             'Upload Attender Image.'+
                                          '</label>'+
                                          '<input type="file" accept="image/*" id="attender_image_'+no_of_attender+'" class="upload-file-input attender_image">'+
                                          // '<i class="fa fa-file-image-o" aria-hidden="true"></i>'+
                                          '<img class="fa fa-file-image-o" src="" style="width:30px;" id="attender_img_tag_'+no_of_attender+'" />'+
                                          '<div class="image-upload-size">Please keep image size less than 1MB</div>'+
                                       '</div>'+
                                       '<div class="no-of-episode">'+
                                          '<input type="text" id="attender_title_'+no_of_attender+'" placeholder="Enter Attender Name attender_title" class="attender_title">'+
                                       '</div>'+
                                       htmlElement+
                                    '</div>';
                                    
                        }

                        jQuery(document).ready(function( $ ) {
                           // frequently asked question functionality
                           var wabinar_list = new Array();
                           var content_id = 0;
                           var isUpcomingWebinar = true;
                           $('#toastData').hide();
                           $('#toastDataError').hide();
                           $('#submit_load').hide();
                           $('#image-processor').show();
                           $('#spinner-div').hide();
                           function init_all_repeated_element(){
                              content_id = 0;
                              no_asked_question = 0;
                              no_of_webinar_points = 0;
                              no_of_speakers = 0;
                              speaker_images = {};
                              no_of_attender = 0;
                              attender_images = {};
                              var asked_question_requency = 
                              $('.frequently-asked-question').empty();
                              $('.speakers_div').empty();
                              $('.webinar_div').empty();
                              $('.attender_div').empty();
                              $('.frequently-asked-question').append(add_question_element('<button class="btn btn-primary sm" id="add_question_btn">+</button>'));
                              $('.speakers_div').append(add_speakers('<button class="btn btn-primary sm" id="add_speaker">+</button>'));
                              $('.webinar_div').append(add_webinar_points('<button class="btn btn-primary sm" id="add_webinar_point">+</button>'));
                              $('.attender_div').append(add_attender('<button class="btn btn-primary sm" id="add_attender_hero">+</button>'));
                           }
                           // frequently asked functionality
                           $('.frequently-asked-question').on('click', '#add_question_btn', function(e){
                              no_asked_question++;
                              $('.frequently-asked-question').append(add_question_element('<button class="btn btn-danger sm remove_question_btn">-</button>'));
                           });
                           $('.frequently-asked-question').on('click', '.remove_question_btn', function(e){
                              e.preventDefault();
                              $(this).parent('div').remove(); //Remove field html
                              // no_asked_question--; //Decrement field counter
                           });
                           // speakers functionality
                           $('.speakers_div').on('click', '#add_speaker', function(e){
                              no_of_speakers++;
                              $('.speakers_div').append(add_speakers('<button class="btn btn-danger sm remove_speakers_btn" >-</button>'));
                           });
                           $('.speakers_div').on('click', '.remove_speakers_btn', function(e){
                              e.preventDefault();
                              $(this).parent('div').remove(); //Remove field html
                              // no_of_speakers--; //Decrement field counter
                           });
                           // webinar points functionality
                           $('.webinar_div').on('click', '#add_webinar_point', function(e){
                              no_of_webinar_points++;
                              $('.webinar_div').append(add_webinar_points('<button class="btn btn-danger sm remove_webinar_point">-</button>'));
                           });
                           $('.webinar_div').on('click', '.remove_webinar_point', function(e){
                              e.preventDefault();
                              $(this).parent('div').remove(); //Remove field html
                              // no_of_webinar_points--; //Decrement field counter
                           });
                           // attender functionality
                           $(document).on('click', '#add_attender_hero', function() {  
                              no_of_attender++;
                              $('.attender_div').append(add_attender('<button class="btn btn-danger sm remove_attender_hero">-</button>'));
                           });
                           $('.attender_div').on('click', '.remove_attender_hero', function(e){
                              e.preventDefault();
                              $(this).parent('div').remove(); //Remove field html
                              // no_of_attender--; //Decrement field counter
                           });

                           $("#category_content").on('change', function() {
                              if(this.value=='upcoming event' || this.value=='live'){
                                 $('#timeDuration').prop('disabled', true);
                                 $('#demanded_video_url').prop('disabled', true);
                                 $('#webinar-id').prop('disabled', false);
                                 isUpcomingWebinar = true;
                              }else{
                                 $('#timeDuration').prop('disabled', false);
                                 $('#demanded_video_url').prop('disabled', false);
                                 $('#webinar-id').prop('disabled', true);
                                 isUpcomingWebinar = false;
                              }
                           });
                           
                           $('#create_webinar_session').click(function(){
                              $("#category_name").val("Featured").change();
                              $("#category_content").val("upcoming event").change();
                              $('#webinar_title').val('');
                              $('#webinar_date').val('');
                              $('#webinar_time').val('');
                              $('#webinar_country').val('');
                              $('#no_of_people_view').val('');
                              $('#hero_video_url').val('');
                              $('#webinar_description').val('');
                              $('#timeDuration').val('');
                              $('#demanded_video_url').val('');
                              $('#webinar_img_tag').attr("src","");
                              $('#check-locat-time').val('');
                              $('#webinar-id').val('');
                              $('#registration-id').val('');
                              $("input:checkbox[name='who_should_attend[]']").each(function(){
                                 $(this).prop("checked", ($.inArray($(this).val(), '') != -1));
                              });
                              init_all_repeated_element();
                              $('#newWebinar').modal('toggle');
                           });

                           var offset = 0;
                           var param = { 
                                       "action": "get_all_contents",
                                       "search": "",
                                       "query": "",
                                       "filter":"",
                                       "offset":offset
                                    };

                           function readURL(input, img_tag) {
                              if (input.files && input.files[0]) {
                                    var reader = new FileReader();
                                    
                                    reader.onload = function (e) {
                                       img_tag.attr('src', e.target.result);
                                    }
                                    reader.readAsDataURL(input.files[0]);
                              }
                           }
                           $("#webinar_img").change(function(){
                              if(this.files[0].size > 1024*1024){
                                 alert("File is should be less than equal to 1 MB!");
                                 this.value = "";
                              }
                              readURL(this, $('#webinar_img_tag'));
                           });

                           $('.attender_div').on('change', 'input', function(e){
                              if(this.files[0].size > 1024*1024){
                                 alert("File is should be less than equal to 1 MB!");
                                 this.value = "";
                              }
                              readURL(this, $(this).siblings('img'));
                           });

                           $('.speakers_div').on('change', 'input', function(e){
                              if(this.files[0].size > 1024*1024){
                                 alert("File is should be less than equal to 1 MB!");
                                 this.value = "";
                              }
                              readURL(this, $(this).siblings('img'));
                           });

                           function calculateTimeDuration(){
                              var timeOfCall = $('#webinar_time').val(),
                                 timeOfResponse = $('#timeDuration').val(),
                                 hours = timeOfResponse.split(':')[0] - timeOfCall.split(':')[0],
                                 minutes = timeOfResponse.split(':')[1] - timeOfCall.split(':')[1];
                              
                              minutes = minutes.toString().length<2?'0'+minutes:minutes;
                              if(minutes<0){ 
                                 hours--;
                                 minutes = 60 + minutes;
                              }
                              hours = hours.toString().length<2?'0'+hours:hours;
                              
                              return Number(hours + '.' + minutes); 
                           }

                           

                           $('#submitBtn').click(function(){
                              
                              var questions = $("input[name='question[]']").map(function(){return $(this).val();}).get();
                              var answers = $("input[name='answer[]']").map(function(){return $(this).val();}).get();
                              
                              var who_should_attend = $("input:checkbox:checked[name='who_should_attend[]']").map(function(){return $(this).val();}).get();
                              var fd = new FormData();
                              fd.append('action','insert_webinar');
                              fd.append('webinar_img',$('#webinar_img')[0].files[0]);
                              // fd.append('go_live_img',$('#goLiveImage')[0].files[0]);
                              fd.append('category_name',$("#category_name").val().join(','));
                              fd.append('category_content',$("#category_content option:selected").val());
                              fd.append('go_live',$("#go_live option:selected").val());
                              fd.append('webinar_title',$("#webinar_title").val());
                              fd.append('webinar_date',$("#webinar_date").val());
                              fd.append('webinar_time',$("#webinar_time").val());
                              fd.append('webinar_country',$("#webinar_country").val());
                              fd.append('no_of_people_view',$("#no_of_people_view").val());
                              fd.append('hero_video_url',$("#hero_video_url").val());
                              fd.append('who_should_attend',who_should_attend.join());
                              fd.append('timeDuration',calculateTimeDuration());
                              fd.append('endTime',$('#timeDuration').val());
                              fd.append('webinar_description',$("#webinar_description").val());
                              fd.append('demand_video_url',$('#demanded_video_url').val());
                              fd.append('local_time', $('#check-locat-time').val());
                              fd.append('webinar_id', $('#webinar-id').val());
                              fd.append('registration_id', $('#registration-id').val());
                              if(content_id>0){
                                 fd.append('content_id',content_id);
                              }

                              if(no_of_attender>=0){
                                 fd.append('no_of_attenders',no_of_attender);
                                 for(var i = 0; i<=no_of_attender; i++){
                                    if($('#attender_title_'+i).val() || $('#attender_image_'+i)[0]){
                                       if($('#attender_image_'+i)[0].files[0]){
                                          fd.append('attender_img_'+i,$('#attender_image_'+i)[0].files[0]);
                                       }else if(attender_images['attender_image_'+i]){
                                          fd.append('attender_image_'+i,attender_images['attender_image_'+i]);
                                       }   
                                       fd.append('attender_name_'+i,$('#attender_title_'+i).val());
                                    } 
                                 }
                              }

                              if(no_of_speakers>=0){
                                 fd.append('no_of_speakers',no_of_speakers);
                                 for(var i = 0; i<=no_of_speakers; i++){
                                    if( $('#speaker_name_'+i).val() || $('#speaker_ownership_'+i).val() || $('#speaker_desc_'+i).val() || $('#speaker_image_'+i)[0]){
                                       if($('#speaker_image_'+i)[0].files[0]){
                                          fd.append('speaker_img_'+i, $('#speaker_image_'+i)[0].files[0]);
                                       }else if(speaker_images['speaker_image_'+i]){
                                          fd.append('speaker_image_'+i,speaker_images['speaker_image_'+i]);
                                       } 
                                       fd.append('speaker_name_'+i, $('#speaker_name_'+i).val());
                                       fd.append('speaker_own_'+i, $('#speaker_ownership_'+i).val());
                                       fd.append('speaker_desc_'+i, $('#speaker_desc_'+i).val());
                                    }
                                    
                                 }
                              }

                              if(no_asked_question>=0){
                                 fd.append('no_of_question',no_asked_question);
                                 for(var i = 0; i<=no_asked_question; i++){
                                    if($('#question_'+i).val() || $('#answer_'+i).val()){
                                       fd.append('question_'+i, $('#question_'+i).val());
                                       fd.append('answer_'+i, $('#answer_'+i).val());
                                    }
                                 }
                              }

                              if(no_of_webinar_points>=0){
                                 fd.append('no_of_point',no_of_webinar_points);
                                 for(var i = 0; i<=no_of_webinar_points; i++){
                                    if($('#webinar_point_'+i).val()){
                                       fd.append('webinar_point_'+i, $('#webinar_point_'+i).val());
                                    } 
                                 }
                              }
                              if($("#webinar_title").val()){
                                 if(isUpcomingWebinar && !$('#webinar-id').val() && $("#category_content").val()!='disable'){
                                    $("#webinar-id").addClass("error-border");
                                    $('#webinar-id').focus();
                                    return false;
                                 }else if(isUpcomingWebinar && !$('#registration-id').val() && $("#category_content").val()!='disable'){
                                    $("#registration-id").addClass("error-border");
                                    $('#registration-id').focus();
                                    return false;
                                 }else if(!isUpcomingWebinar && !$('#demanded_video_url').val() && $("#category_content").val()!='disable'){
                                    $("#demanded_video_url").addClass("error-border");
                                    $('#demanded_video_url').focus();
                                    return false;
                                 }
                                 $('#submitBtn').prop('disabled', true); 
                                 $('#submit_load').show();
                                 $.ajax({
                                       url: '/wp-admin/admin-ajax.php',
                                       type: 'post',
                                       data: fd,
                                       contentType: false,
                                       processData: false,
                                       success: function(response){
                                          var data = JSON.parse(response);
                                          param.offset = 0;
                                          if(data.result!='not inserted'){
                                             $('#image-processor').show();
                                             wabinar_list = new Array();
                                             $('#submitBtn').prop('disabled', false); 
                                             $('#submit_load').hide();  
                                             $('#newWebinar').modal('toggle');
                                             ajax_call(param);
                                             $('#toastData').show().delay(2000).fadeOut(400);
                                          }else{
                                             $('#toastDataError').show().delay(2000).fadeOut(400);
                                          }
                                          $("#webinar-id").removeClass("error-border");
                                          $("#demanded_video_url").removeClass("error-border");
                                          $("#webinar_title").removeClass("error-border");
                                       },
                                       error: function (response) {
                                          $('#submit_load').hide(); 
                                          $('#submitBtn').prop('disabled', false);
                                          $("#webinar-id").removeClass("error-border");
                                          $("#demanded_video_url").removeClass("error-border");
                                          $("#webinar_title").removeClass("error-border"); 
                                       }
                                 });
                              }else{
                                 $("#webinar_title").addClass("error-border");
                                 $("#webinar_title").focus();
                                 return false;
                              }
                           });

                           // get data for editing
                           function addOnEditCardHtml(value, index_url){
                              return   '<div class="col-12 col-md-3">'+
                                          '<div class="card editSessions">'+
                                             '<img class="card-img-top" src="<?php echo content_url() ?>'+value['image_path'].split('/home/s1/html/wp-content')[1]+'" alt="Card image cap">'+
                                             '<div class="card-body">'+
                                                '<h5 class="card-title">'+value['title']+'</h5>'+
                                                '<div class="edit-delete-webinar">'+
                                                   '<div class="date">'+value['date']+'</div>'+
                                                   '<svg class="editWebinarIcon" content-id="'+value['id']+'" height="25" width="25" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"'+
                                                      'viewBox="0 0 512 512" xml:space="preserve">'+
                                                      '<g>'+
                                                         '<g>'+
                                                            '<path d="M403.914,0L54.044,349.871L0,512l162.128-54.044L512,108.086L403.914,0z M295.829,151.319l21.617,21.617L110.638,379.745'+
                                                               'l-21.617-21.617L295.829,151.319z M71.532,455.932l-15.463-15.463l18.015-54.043l51.491,51.491L71.532,455.932z M153.871,422.979'+
                                                               'l-21.617-21.617l206.809-206.809l21.617,21.617L153.871,422.979z M382.297,194.555l-64.852-64.852l21.617-21.617l64.852,64.852'+
                                                               'L382.297,194.555z M360.679,86.468l43.234-43.235l64.853,64.853l-43.235,43.234L360.679,86.468z"/>'+
                                                         '</g>'+
                                                      '</g>'+
                                                   '</svg>'+
                                                   // '<i class="fa fa-spinner fa-spin edit-spinner-"'+value['id']+'></i>'+
                                                   '<i data-toggle="modal" data-target="#deleteCard" class="fa fa-trash-o delete-icon" style="cursor:pointer;" content-id="'+value['id']+'"></i>'+
                                                '</div>'+
                                             '</div>'+
                                          '</div>'+
                                       '</div>';
                           }

                           function ajax_call(param, isLoadMore){
                              if(!isLoadMore){
                                 $('#cardListEdit .row').empty();
                                 $('#cardListEdit .row').hide(100);
                              }else{
                                 wabinar_list = new Array();
                                 $('#image-processor').show();
                              }
                              
                              $('.no-data-found').hide();
                              $('#spinner-div').hide();
                              $('#see_more_session').hide();
                              $.ajax({
                                    url: '/wp-admin/admin-ajax.php',
                                    type: 'post',
                                    data: param,
                                    success: function(response){
                                       var data = JSON.parse(response);
                                       $('#image-processor').hide();
                                       if(data['message'] != 'no quote found'){
                                          $.each(data['message'], function( index, value ) {
                                             wabinar_list.push(value);
                                          });
                                          if(data["see_more_session"][0]["count(*)"]>8){
                                             $('#see_more_session').show();
                                          }
                                          $.each(wabinar_list, function( index, value ) {
                                             offset = value['id'];
                                             $('#cardListEdit .row').append(addOnEditCardHtml(value, index));
                                             $('#cardListEdit .row').show(200);
                                          });
                                          if(wabinar_list.length<8){
                                             param.offset = 0;
                                          }
                                       }else{
                                          $('.no-data-found').show();
                                       } 
                                    },
                                    error: function (response) {
                                       $('#submit_load').hide(); 
                                    }
                              });
                           }
                           
                           ajax_call(param, false);
                           
                           $('#see_more_session').click(function(){
                              $('#image-processor').show();
                              param.offset=offset
                              ajax_call(param, true);
                           });

                           var delete_id = '';
                           $('#cardListEdit').on('click', '.delete-icon', function(){
                              delete_id = $(this).attr("content-id");
                              $('#deleteCard').modal('toggle')
                              
                           });
                           $('#confirm-delete-btn').click(function(){
                              $.ajax({
                                    url: '/wp-admin/admin-ajax.php',
                                    type: 'post',
                                    data: {"action": "delete_contents","content_id":delete_id},
                                    
                                    success: function(response){
                                       param.offset = 0;
                                       var data = JSON.parse(response);
                                       $('#image-processor').show();
                                       wabinar_list = new Array();
                                       $('#deleteCard').modal('toggle');
                                       ajax_call(param, false);
                                    },
                                    error: function (response) {
                                       param.offset = 0;
                                       $('#deleteCard').modal('toggle');
                                       $('#cardListEdit .row').show(100);
                                       $('.no-data-found').show();
                                       $('.edit-spinner').show();
                                       $('#image-processor').hide();
                                    }
                              });
                           });

                           $('#cardListEdit').on('click', '.editWebinarIcon', function(){
                              no_asked_question = 0;
                              no_of_webinar_points = 0;
                              no_of_speakers = 0;
                              no_of_attender = 0;
                              $('#spinner-div').show();
                              content_id = $(this).attr("content-id");
                              $('#newWebinar').modal('toggle');

                              $('#webinar_img_tag').attr("src","");
                              $('#webinar_img').val(null);
                              
                              $.ajax({
                                    url: '/wp-admin/admin-ajax.php',
                                    type: 'post',
                                    data: {"action": "get_content_by_id","content_id":content_id},
                                    success: function(response){
                                       var data = JSON.parse(response);
                                       $('#spinner-div').hide();
                                       offset=0;
                                       // $('#newWebinar').modal('toggle');
                                       if(data['message'] != 'no quote found'){
                                          updateInnerHTML(data);
                                       }else{
                                          
                                       } 
                                    },
                                    error: function (response) {
                                       $('.edit-spinner').hide();
                                       console.log(response);
                                    }
                              });
                           });

                           // $('#newWebinar').on('hidden.bs.modal', function () {
                           //    $(this).empty();
                           // });

                           function updateInnerHTML(data){
                              attender_images = {};
                              speaker_images = {};
                              if(data){
                                 $("#category_name").val(data.content[0]['category_name'].split(',')).change();
                                 $("#category_content").val(data.content[0]['category_content']).change();
                                 $('#webinar_title').val(data.content[0]['title']);
                                 $('#webinar_date').val(data.content[0]['date']);
                                 $('#webinar_time').val(data.content[0]['time']);
                                 $('#webinar_country').val(data.content[0]['country']).change();
                                 $('#no_of_people_view').val(data.content[0]['no_of_people_view']);
                                 $('#hero_video_url').val(data.content[0]['hero_video_url']);
                                 $('#webinar_description').val(data.content[0]['webinar_description']);
                                 $('#timeDuration').val(data.content[0]['endTime']);
                                 $('#demanded_video_url').val(data.content[0]['demand_video_url']);
                                 $('#check-locat-time').val(data.content[0]['local_time']);
                                 $('#webinar-id').val(data.content[0]['webinar_id']);
                                 $('#registration-id').val(data.content[0]['registration_id']);
                                 $('#webinar_img_tag').attr("src", "<?php echo content_url() ?>"+data.content[0]['image_path'].split('/home/s1/html/wp-content')[1]);
                                 $("input:checkbox[name='who_should_attend[]']").each(function(){
                                    $(this).prop("checked", ($.inArray($(this).val(), data.content[0]['who_should_attend'].split(",")) != -1));
                                 });
                              
                                 if(data.asked_question.length>0){
                                    $('.frequently-asked-question').empty();
                                    $.each(data.asked_question, function( index, value ) {
                                       if(index==0){
                                          $('.frequently-asked-question').append(add_question_element('<button class="btn btn-primary sm" id="add_question_btn">+</button>'));
                                       }else{
                                          no_asked_question++
                                          $('.frequently-asked-question').append(add_question_element('<button class="btn btn-danger sm remove_question_btn">-</button>')); 
                                       }
                                       $('.question_container_'+index+' .question').val(value.question);
                                       $('.question_container_'+index+' .answer').val(value.answer);
                                    });
                                 }else{
                                    $('.frequently-asked-question').empty();
                                    $('.frequently-asked-question').append(add_question_element('<button class="btn btn-primary sm" id="add_question_btn">+</button>'));
                                 }

                                 if(data.webinar_point.length>0){
                                    $('.webinar_div').empty();
                                    $.each(data.webinar_point, function( index, value ) {
                                       if(index==0){
                                          $('.webinar_div').append(add_webinar_points('<button class="btn btn-primary sm" id="add_webinar_point">+</button>'));
                                       }else{
                                          no_of_webinar_points++;
                                          $('.webinar_div').append(add_webinar_points('<button class="btn btn-danger sm remove_webinar_point">-</button>'));
                                       }
                                       $('#webinar_point_'+index).val(value.point);
                                    });
                                 }else{
                                    $('.webinar_div').empty();
                                    $('.webinar_div').append(add_webinar_points('<button class="btn btn-primary sm" id="add_webinar_point">+</button>'));
                                 }

                                 if(data.speaker.length>0){
                                    $('.speakers_div').empty();
                                    $.each(data.speaker, function( index, value ) {
                                       if(index==0){
                                          $('.speakers_div').append(add_speakers('<button class="btn btn-primary sm" id="add_speaker">+</button>'));
                                       }else{
                                          no_of_speakers++;
                                          $('.speakers_div').append(add_speakers('<button class="btn btn-danger sm remove_speakers_btn" >-</button>'));
                                       }
                                       $('.speakers_container_'+index+' .speaker_name').val(value.name);
                                       $('.speakers_container_'+index+' .speaker_ownership').val(value.designation);
                                       $('.speakers_container_'+index+' .speaker_desc').val(value.description);
                                       $('#speaker_img_tag_'+index).attr("src",'data:image/jpeg;base64,'+value['image']);
                                       speaker_images['speaker_image_'+index] = value['image'];
                                    });
                                 }else{
                                    $('.speakers_div').empty();
                                    $('.speakers_div').append(add_speakers('<button class="btn btn-primary sm" id="add_speaker">+</button>'));
                                 }

                                 if(data.attender.length>0){
                                    $('.attender_div').empty();
                                    $.each(data.attender, function( index, value ) {
                                       if(index==0){
                                          $('.attender_div').append(add_attender('<button class="btn btn-primary sm" id="add_attender_hero">+</button>'));
                                       }else{
                                          no_of_attender++;
                                          $('.attender_div').append(add_attender('<button class="btn btn-danger sm remove_attender_hero">-</button>'));
                                       }
                                       $('.attender_hero_container_'+index+' .attender_title').val(value.name);
                                       $('#attender_img_tag_'+index).attr("src",'data:image/jpeg;base64,'+value['image']); 
                                       
                                       attender_images['attender_image_'+index] = value['image'];
                                       
                                    });
                                 }else{
                                    $('.attender_div').empty();
                                    $('.attender_div').append(add_attender('<button class="btn btn-primary sm" id="add_attender_hero">+</button>'));
                                 }
                              }
                           }

                        });

                     </script>
                  </div>



                  <div class="container">
                     <div class="row">
                        <div class="col-12 col-md-12">
                           <div class="catagory-content shadow-main submit-data">
                              <button class="btn btn-primary lg" id="submitBtn">Submit Data  &nbsp;<i class="fa fa-spinner fa-spin" id="submit_load"></i></button>
                           </div>
                        </div>
                     </div>
                  </div>

               </section>
               
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <img src="<?php echo get_template_directory_uri() ?>/homepage_assets/img/svg/close-menu.svg" alt="SurveySensum"/>
               </button>
         </div>
      </div>
   </div>
</div>
<!-- End Create New Webinar Modal -->

<div id="toastData" style="background-color: #00875a;">Data Successfully Submitted...</div>
<div id="toastDataError" style="background-color: #dc3545;">Something went wrong...</div>







<?php get_footer(); ?>



<div class="modal fade" id="deleteCard" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-body">
         <div class="delete-msg">
            <h4>You want to delete item ?</h5>
         </div>
         <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <img src="<?php echo get_template_directory_uri() ?>/homepage_assets/img/svg/close-menu.svg" alt="SurveySensum"/>
         </button>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="confirm-delete-btn">Yes</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal">No</button>
      </div>
    </div>
  </div>
</div>